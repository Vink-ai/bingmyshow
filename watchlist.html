<html>
    <head>
        <!-- Compiled and minified CSS -->
        <!-- <link rel="stylesheet" href="css/materialize.min.css"> -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="styles.css">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
        <script src="js/jquery-3.2.1.slim.min.js"></script>
        <script src="./js/bootstrap.min.js"></script>
        <script src="./js/popper.min.js"></script>
        <script src="./js/jquery-3.5.1.min.js"></script>
        <script src="./js/header-footer.js"></script> 
        <script src="./js/angular.min.js"></script>
        <link rel="stylesheet" href="watchlist.css">
        <script>
            var app = angular.module('wishlist', []);
            app.controller('wishlistRecord', function($scope, $http){
                $scope.vlist = [];
                console.log("angular")
                console.log($scope.search);

                var queryString = decodeURIComponent(window.location.search);
                queryString = queryString.substring(1);
                var queries = queryString.split("&");
                var objtitle = queries[0];
                var objImgSrc = queries[1];
                $scope.title = objtitle;
                $scope.imgUrl = objImgSrc;

                $scope.add = function(){
                    var id = $scope.vlist.length + 1;
                    var obj = {
                        "id": id,
                        "title": $scope.title,
                        "imgUrl" : $scope.imgUrl
                    }
                    console.log($scope.vlist);
                    var isEmpty = function isEmpty(obj) {
                        for(var key in obj) {
                            if(obj.hasOwnProperty(key))
                                return false;
                        }
                        return true;
                    }
                    if( obj['title'] == '' || obj['imgUrl'] == ''){
                        console.log("Object is empty");
                    }else{
                        $scope.vlist.push(obj); 
                    }                    
                }

                $scope.clear = function(){
                    $scope.title = "";
                    $scope.imgUrl = "";
                }
            });

        </script>
    </head>
    <body ng-app="wishlist">
        <div ng-include="'header.html'"></div>
        <hr>
        <div class="container" ng-controller="wishlistRecord">
            <div class="row">
                <div class="col-sm-10 col-lg-10">
                    <form>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Title</label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="exampleInputEmail1" 
                                aria-describedby="emailHelp"
                                ng-model="title">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">ImageUrl</label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="exampleInputPassword1"
                                ng-model="imgUrl">
                        </div>
                        <button type="button" class="btn btn-primary" ng-click="add()">+ Add</button>
                        <button type="button" class="btn btn-primary" ng-click="clear()">Clear</button>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-10 col-sm-10 col-lg-10">
                    <h6 class="text-muted">Your WishList</h6> 
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center" ng-repeat="item in vlist">
                        <strong>{{ item.title }}</strong>
                        <div class="image-parent">
                            <img src="{{ item.imgUrl }}" class="img-fluid" alt="quixote">
                        </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <hr>
        <!-- Footer -->
        <div ng-include="'footer.html'"></div>    
    </body>
</html>